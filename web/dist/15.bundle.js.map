{"version":3,"sources":["webpack:///./src/components/pages/contribution/speak/appstore.svg","webpack:///./src/components/pages/contribution/speak/recording-pill.css?518a","webpack:///./src/components/pages/contribution/speak/recording-pill.tsx","webpack:///./src/components/pages/contribution/speak/speak.css?3a6f","webpack:///./src/components/pages/contribution/speak/speak.tsx"],"names":[],"mappings":"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","file":"15.bundle.js","sourcesContent":["module.exports = __webpack_public_path__ + \"d0558d91063038236b60e3ef71fdc1fd.svg\";","// extracted by mini-css-extract-plugin","import {\n  LocalizationProps,\n  Localized,\n  withLocalization,\n} from 'fluent-react/compat';\nimport * as React from 'react';\nimport { useRef, useState } from 'react';\nimport { trackRecording } from '../../../../services/tracker';\nimport { useLocale } from '../../../locale-helpers';\nimport {\n  PlayOutlineIcon,\n  RedoIcon,\n  ShareIcon,\n  StopIcon,\n} from '../../../ui/icons';\nimport { ContributionPillProps } from '../contribution';\nimport Pill, { PillStatus } from '../pill';\nimport { SentenceRecording } from './sentence-recording';\n\nimport './recording-pill.css';\n\nconst { Tooltip } = require('react-tippy');\n\ninterface Props extends ContributionPillProps, LocalizationProps {\n  children?: React.ReactNode;\n  clip: SentenceRecording;\n  onRerecord: () => any;\n  status: PillStatus;\n}\n\nfunction RecordingPill({\n  children,\n  clip,\n  getString,\n  onRerecord,\n  onShare,\n  status,\n  ...props\n}: Props) {\n  const [locale] = useLocale();\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [showSentenceTooltip, setShowSentenceTooltip] = useState(false);\n  const audioRef = useRef(null);\n\n  const toggleIsPlaying = () => {\n    const { current: audio } = audioRef;\n    let nextIsPlaying = !isPlaying;\n    if (nextIsPlaying) {\n      trackRecording('listen', locale);\n      audio.play();\n    } else {\n      audio.pause();\n      audio.currentTime = 0;\n    }\n    setIsPlaying(nextIsPlaying);\n  };\n\n  return (\n    <Pill {...props} className=\"recording\" openable status={status}>\n      {children}\n\n      {!children && status === 'active' && (\n        <Localized id=\"record-cta\">\n          <div className=\"text\" />\n        </Localized>\n      )}\n\n      {!children && status === 'done' && (\n        <React.Fragment>\n          <audio\n            src={clip.recording.url}\n            preload=\"auto\"\n            onEnded={toggleIsPlaying}\n            ref={audioRef}\n          />\n          <Tooltip\n            arrow\n            open={isPlaying || showSentenceTooltip}\n            theme=\"grey-tooltip\"\n            title={clip.sentence.text}>\n            <button\n              className=\"play\"\n              type=\"button\"\n              onClick={toggleIsPlaying}\n              onMouseEnter={() => setShowSentenceTooltip(true)}\n              onMouseLeave={() => setShowSentenceTooltip(false)}>\n              <span className=\"padder\">\n                {isPlaying ? <StopIcon /> : <PlayOutlineIcon />}\n              </span>\n            </button>\n          </Tooltip>\n          {isPlaying ? (\n            <div className=\"placeholder\" />\n          ) : (\n            <React.Fragment>\n              <Tooltip arrow title={getString('review-tooltip')}>\n                <button className=\"redo\" type=\"button\" onClick={onRerecord}>\n                  <span className=\"padder\">\n                    <RedoIcon />\n                  </span>\n                </button>\n              </Tooltip>\n              <button className=\"share\" type=\"button\" onClick={onShare}>\n                <span className=\"padder\">\n                  <ShareIcon />\n                </span>\n              </button>\n            </React.Fragment>\n          )}\n        </React.Fragment>\n      )}\n    </Pill>\n  );\n}\n\nexport default withLocalization(RecordingPill);\n","// extracted by mini-css-extract-plugin","import {\n  LocalizationProps,\n  Localized,\n  withLocalization,\n} from 'fluent-react/compat';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps, withRouter } from 'react-router';\nconst NavigationPrompt = require('react-router-navigation-prompt').default;\nimport { Locale } from '../../../../stores/locale';\nimport { Notifications } from '../../../../stores/notifications';\nimport { Sentences } from '../../../../stores/sentences';\nimport StateTree from '../../../../stores/tree';\nimport { Uploads } from '../../../../stores/uploads';\nimport { User } from '../../../../stores/user';\nimport API from '../../../../services/api';\nimport { trackRecording } from '../../../../services/tracker';\nimport URLS from '../../../../urls';\nimport {\n  localeConnector,\n  LocaleLink,\n  LocalePropsFromState,\n} from '../../../locale-helpers';\nimport Modal, { ModalButtons } from '../../../modal/modal';\nimport TermsModal from '../../../terms-modal';\nimport { CheckIcon, FontIcon, MicIcon, StopIcon } from '../../../ui/icons';\nimport { Button, TextButton } from '../../../ui/ui';\nimport { getItunesURL, isFirefoxFocus, isNativeIOS } from '../../../../utility';\nimport ContributionPage, {\n  ContributionPillProps,\n  SET_COUNT,\n} from '../contribution';\nimport {\n  RecordButton,\n  RecordingStatus,\n} from '../../../primary-buttons/primary-buttons';\nimport AudioIOS from './audio-ios';\nimport AudioWeb, { AudioError, AudioInfo } from './audio-web';\nimport RecordingPill from './recording-pill';\nimport { SentenceRecording } from './sentence-recording';\n\nimport './speak.css';\n\nconst MIN_RECORDING_MS = 1000;\nconst MAX_RECORDING_MS = 10000;\nconst MIN_VOLUME = 1;\n\nenum RecordingError {\n  TOO_SHORT = 'TOO_SHORT',\n  TOO_LONG = 'TOO_LONG',\n  TOO_QUIET = 'TOO_QUIET',\n}\n\nconst UnsupportedInfo = () => (\n  <div className=\"unsupported\">\n    <Localized id=\"record-platform-not-supported\">\n      <h2 />\n    </Localized>\n    <p key=\"desktop\">\n      <Localized id=\"record-platform-not-supported-desktop\">\n        <span />\n      </Localized>\n      <a target=\"_blank\" href=\"https://www.firefox.com/\">\n        <FontIcon type=\"firefox\" />\n        Firefox\n      </a>{' '}\n      <a target=\"_blank\" href=\"https://www.google.com/chrome\">\n        <FontIcon type=\"chrome\" />\n        Chrome\n      </a>\n    </p>\n    <p key=\"ios\">\n      <Localized id=\"record-platform-not-supported-ios\" bold={<b />}>\n        <span />\n      </Localized>\n    </p>\n    <a target=\"_blank\" href={getItunesURL()}>\n      <img src={require('./appstore.svg')} />\n    </a>\n  </div>\n);\n\ninterface PropsFromState {\n  api: API;\n  locale: Locale.State;\n  sentences: Sentences.Sentence[];\n  user: User.State;\n}\n\ninterface PropsFromDispatch {\n  addUploads: typeof Uploads.actions.add;\n  addNotification: typeof Notifications.actions.addPill;\n  removeSentences: typeof Sentences.actions.remove;\n  tallyRecording: typeof User.actions.tallyRecording;\n  refreshUser: typeof User.actions.refresh;\n  updateUser: typeof User.actions.update;\n}\n\ninterface Props\n  extends LocalePropsFromState,\n    LocalizationProps,\n    PropsFromState,\n    PropsFromDispatch,\n    RouteComponentProps<any> {}\n\ninterface State {\n  clips: SentenceRecording[];\n  isSubmitted: boolean;\n  error?: RecordingError | AudioError;\n  recordingStatus: RecordingStatus;\n  rerecordIndex?: number;\n  showPrivacyModal: boolean;\n  showDiscardModal: boolean;\n}\n\nconst initialState: State = {\n  clips: [],\n  isSubmitted: false,\n  error: null,\n  recordingStatus: null,\n  rerecordIndex: null,\n  showPrivacyModal: false,\n  showDiscardModal: false,\n};\n\nclass SpeakPage extends React.Component<Props, State> {\n  state: State = initialState;\n\n  audio: AudioWeb | AudioIOS;\n  isUnsupportedPlatform = false;\n  maxVolume = 0;\n  recordingStartTime = 0;\n  recordingStopTime = 0;\n\n  static getDerivedStateFromProps(props: Props, state: State) {\n    if (state.clips.length > 0) {\n      const sentenceIds = state.clips\n        .map(({ sentence }) => (sentence ? sentence.id : null))\n        .filter(Boolean);\n      const unusedSentences = props.sentences.filter(\n        s => !sentenceIds.includes(s.id)\n      );\n      return {\n        clips: state.clips.map(clip =>\n          clip.sentence\n            ? clip\n            : { recording: null, sentence: unusedSentences.pop() || null }\n        ),\n      };\n    }\n\n    if (props.sentences.length > 0) {\n      return {\n        clips: props.sentences\n          .slice(0, SET_COUNT)\n          .map(sentence => ({ recording: null, sentence })),\n      };\n    }\n\n    return null;\n  }\n\n  componentDidMount() {\n    this.audio = isNativeIOS() ? new AudioIOS() : new AudioWeb();\n    this.audio.setVolumeCallback(this.updateVolume.bind(this));\n\n    document.addEventListener('visibilitychange', this.releaseMicrophone);\n    document.addEventListener('keyup', this.handleKeyUprerecording);\n\n    if (\n      !this.audio.isMicrophoneSupported() ||\n      !this.audio.isAudioRecordingSupported() ||\n      isFirefoxFocus()\n    ) {\n      this.isUnsupportedPlatform = true;\n    }\n  }\n\n  async componentWillUnmount() {\n    document.removeEventListener('keyup', this.handleKeyUprerecording);\n\n    document.removeEventListener('visibilitychange', this.releaseMicrophone);\n    if (!this.isRecording) return;\n    await this.audio.stop();\n  }\n\n  private get isRecording() {\n    return this.state.recordingStatus === 'recording';\n  }\n\n  private handleKeyUprerecording = async (event: any) => {\n    let index = null;\n    //for both sets of number keys on a keyboard with shift key\n    if (event.code === 'Digit1' || event.code === 'Numpad1') {\n      index = 0;\n    } else if (event.code === 'Digit2' || event.code === 'Numpad2') {\n      index = 1;\n    } else if (event.code === 'Digit3' || event.code === 'Numpad3') {\n      index = 2;\n    } else if (event.code === 'Digit4' || event.code === 'Numpad4') {\n      index = 3;\n    } else if (event.code === 'Digit5' || event.code === 'Numpad5') {\n      index = 4;\n    }\n\n    if (index !== null) {\n      trackRecording('rerecord', this.props.locale);\n      await this.discardRecording();\n      this.setState({\n        rerecordIndex: index,\n      });\n    }\n  };\n\n  private getRecordingIndex() {\n    const { rerecordIndex } = this.state;\n    return rerecordIndex === null\n      ? this.state.clips.findIndex(({ recording }) => !recording)\n      : rerecordIndex;\n  }\n\n  private releaseMicrophone = () => {\n    if (!document.hidden) {\n      return;\n    }\n\n    if (this.isRecording) {\n      this.saveRecording();\n    }\n    this.audio.release();\n  };\n\n  private processRecording = (info: AudioInfo) => {\n    const error = this.getRecordingError();\n    if (error) {\n      return this.setState({ error });\n    }\n\n    const { clips } = this.state;\n    this.setState({\n      clips: clips.map(({ recording, sentence }, i) => ({\n        recording: i === this.getRecordingIndex() ? info : recording,\n        sentence,\n      })),\n      rerecordIndex: null,\n    });\n\n    trackRecording('record', this.props.locale);\n  };\n\n  private getRecordingError = (): RecordingError => {\n    const length = this.recordingStopTime - this.recordingStartTime;\n    if (length < MIN_RECORDING_MS) {\n      return RecordingError.TOO_SHORT;\n    }\n    if (length > MAX_RECORDING_MS) {\n      return RecordingError.TOO_LONG;\n    }\n    if (this.maxVolume < MIN_VOLUME) {\n      return RecordingError.TOO_QUIET;\n    }\n    return null;\n  };\n\n  private updateVolume = (volume: number) => {\n    // For some reason, volume is always exactly 100 at the end of the\n    // recording, even if it is silent; so ignore that.\n    if (volume !== 100 && volume > this.maxVolume) {\n      this.maxVolume = volume;\n    }\n  };\n\n  private rerecord = async (i: number) => {\n    trackRecording('rerecord', this.props.locale);\n    await this.discardRecording();\n\n    this.setState({\n      rerecordIndex: i,\n    });\n  };\n\n  private handleRecordClick = async () => {\n    if (this.state.recordingStatus === 'waiting') return;\n    const isRecording = this.isRecording;\n\n    this.setState({ recordingStatus: 'waiting' });\n\n    if (isRecording) {\n      this.saveRecording();\n      return;\n    }\n\n    try {\n      await this.audio.init();\n      await this.startRecording();\n    } catch (err) {\n      if (err in AudioError) {\n        this.setState({ error: err });\n      } else {\n        throw err;\n      }\n    }\n  };\n\n  private startRecording = async () => {\n    try {\n      await this.audio.start();\n      this.maxVolume = 0;\n      this.recordingStartTime = Date.now();\n      this.recordingStopTime = 0;\n      this.setState({\n        // showSubmitSuccess: false,\n        recordingStatus: 'recording',\n        error: null,\n      });\n    } catch (err) {\n      this.setState({\n        recordingStatus: null,\n      });\n    }\n  };\n\n  private saveRecording = () => {\n    const RECORD_STOP_DELAY = 500;\n    setTimeout(async () => {\n      const info = await this.audio.stop();\n      this.processRecording(info);\n    }, RECORD_STOP_DELAY);\n    this.recordingStopTime = Date.now();\n    this.setState({\n      recordingStatus: null,\n    });\n  };\n\n  private discardRecording = async () => {\n    if (!this.isRecording) return;\n    await this.audio.stop();\n    this.setState({ recordingStatus: null });\n  };\n\n  private cancelReRecord = async () => {\n    await this.discardRecording();\n    this.setState({ rerecordIndex: null });\n  };\n\n  private handleSkip = async () => {\n    const { api, removeSentences, sentences } = this.props;\n    const { clips } = this.state;\n    await this.discardRecording();\n    const current = this.getRecordingIndex();\n    const { id } = clips[current].sentence;\n    removeSentences([id]);\n    this.setState({\n      clips: clips.map((clip, i) =>\n        current === i ? { recording: null, sentence: null } : clip\n      ),\n      error: null,\n    });\n    await api.skipSentence(id);\n  };\n\n  private upload = (hasAgreed: boolean = false) => {\n    const {\n      addNotification,\n      addUploads,\n      api,\n      locale,\n      removeSentences,\n      tallyRecording,\n      user,\n      refreshUser,\n    } = this.props;\n\n    if (!hasAgreed && !(user.privacyAgreed || user.account)) {\n      this.setState({ showPrivacyModal: true });\n      return false;\n    }\n\n    const clips = this.state.clips.filter(clip => clip.recording);\n\n    removeSentences(clips.map(c => c.sentence.id));\n\n    this.setState({ clips: [], isSubmitted: true });\n\n    addUploads([\n      ...clips.map(({ sentence, recording }) => async () => {\n        let retries = 3;\n        while (retries) {\n          try {\n            await api.uploadClip(recording.blob, sentence.id, sentence.text);\n            if (!user.account) {\n              tallyRecording();\n            }\n            retries = 0;\n          } catch (error) {\n            let msg;\n            if (error.message === 'save_clip_error') {\n              msg =\n                'Upload of this clip keeps failing at server, reload the page or try after sometime';\n            } else {\n              msg = 'Upload of this clip keeps failing, keep retrying?';\n            }\n            retries--;\n            await new Promise(resolve => setTimeout(resolve, 1000));\n            if (retries == 0 && confirm(msg)) {\n              retries = 3;\n            }\n          }\n        }\n      }),\n      async () => {\n        trackRecording('submit', locale);\n        refreshUser();\n        addNotification(\n          <React.Fragment>\n            <CheckIcon />{' '}\n            <Localized id=\"clips-uploaded\">\n              <span />\n            </Localized>\n          </React.Fragment>\n        );\n      },\n    ]);\n\n    return true;\n  };\n\n  private resetState = (callback?: any) =>\n    this.setState(initialState, callback);\n\n  private agreeToTerms = async () => {\n    this.setState({ showPrivacyModal: false });\n    this.props.updateUser({ privacyAgreed: true });\n    this.upload(true);\n  };\n\n  private toggleDiscardModal = () => {\n    this.setState({\n      showPrivacyModal: false,\n      showDiscardModal: !this.state.showDiscardModal,\n    });\n  };\n\n  private resetAndGoHome = () => {\n    const { history, toLocaleRoute } = this.props;\n    this.resetState(() => {\n      history.push(toLocaleRoute(URLS.ROOT));\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth',\n      });\n    });\n  };\n\n  render() {\n    const { getString, user } = this.props;\n    const {\n      clips,\n      isSubmitted,\n      error,\n      recordingStatus,\n      rerecordIndex,\n      showPrivacyModal,\n      showDiscardModal,\n    } = this.state;\n    const recordingIndex = this.getRecordingIndex();\n    return (\n      <React.Fragment>\n        <NavigationPrompt\n          when={clips.filter(clip => clip.recording).length > 0}>\n          {({ onConfirm, onCancel }: any) => (\n            <Modal innerClassName=\"record-abort\" onRequestClose={onCancel}>\n              <Localized id=\"record-abort-title\">\n                <h1 className=\"title\" />\n              </Localized>\n              <Localized id=\"record-abort-text\">\n                <p className=\"text\" />\n              </Localized>\n              <ModalButtons>\n                <Localized id=\"record-abort-submit\">\n                  <Button\n                    outline\n                    rounded\n                    onClick={() => {\n                      if (this.upload()) onConfirm();\n                    }}\n                  />\n                </Localized>\n                <Localized id=\"record-abort-continue\">\n                  <Button outline rounded onClick={onCancel} />\n                </Localized>\n              </ModalButtons>\n              <Localized id=\"record-abort-delete\">\n                <TextButton onClick={onConfirm} />\n              </Localized>\n            </Modal>\n          )}\n        </NavigationPrompt>\n        {showPrivacyModal && (\n          <TermsModal\n            onAgree={this.agreeToTerms}\n            onDisagree={this.toggleDiscardModal}\n          />\n        )}\n        {showDiscardModal && (\n          <Localized id=\"review-aborted\">\n            <Modal\n              buttons={{\n                [getString('review-keep-recordings')]: this.toggleDiscardModal,\n                [getString('review-delete-recordings')]: this.resetAndGoHome,\n              }}\n            />\n          </Localized>\n        )}\n        <ContributionPage\n          activeIndex={recordingIndex}\n          errorContent={this.isUnsupportedPlatform && <UnsupportedInfo />}\n          instruction={props =>\n            error ? (\n              <div className=\"error\">\n                <Localized\n                  id={\n                    {\n                      [RecordingError.TOO_SHORT]: 'record-error-too-short',\n                      [RecordingError.TOO_LONG]: 'record-error-too-long',\n                      [RecordingError.TOO_QUIET]: 'record-error-too-quiet',\n                      [AudioError.NOT_ALLOWED]: 'record-must-allow-microphone',\n                      [AudioError.NO_MIC]: 'record-no-mic-found',\n                      [AudioError.NO_SUPPORT]: 'record-platform-not-supported',\n                    }[error]\n                  }\n                  {...props}\n                />\n              </div>\n            ) : (\n              <Localized\n                id={\n                  this.isRecording\n                    ? 'record-stop-instruction'\n                    : recordingIndex === SET_COUNT - 1\n                    ? 'record-last-instruction'\n                    : ['record-instruction', 'record-again-instruction'][\n                        recordingIndex\n                      ] || 'record-again-instruction2'\n                }\n                recordIcon={<MicIcon />}\n                stopIcon={<StopIcon />}\n                {...props}\n              />\n            )\n          }\n          isFirstSubmit={user.recordTally === 0}\n          isPlaying={this.isRecording}\n          isSubmitted={isSubmitted}\n          onReset={() => this.resetState()}\n          onSkip={this.handleSkip}\n          onSubmit={() => this.upload()}\n          primaryButtons={\n            <RecordButton\n              status={recordingStatus}\n              onClick={this.handleRecordClick}\n            />\n          }\n          pills={clips.map((clip, i) => (props: ContributionPillProps) => (\n            <RecordingPill\n              {...props}\n              clip={clip}\n              status={\n                recordingIndex === i\n                  ? 'active'\n                  : clip.recording\n                  ? 'done'\n                  : 'pending'\n              }\n              onRerecord={() => this.rerecord(i)}>\n              {rerecordIndex === i && (\n                <Localized id=\"record-cancel\">\n                  <TextButton onClick={this.cancelReRecord} />\n                </Localized>\n              )}\n            </RecordingPill>\n          ))}\n          reportModalProps={{\n            reasons: [\n              'offensive-language',\n              'grammar-or-spelling',\n              'different-language',\n              'difficult-pronounce',\n            ],\n            kind: 'sentence',\n            id: recordingIndex == -1 ? null : clips[recordingIndex].sentence.id,\n          }}\n          sentences={clips.map(({ sentence }) => sentence && sentence.text)}\n          shortcuts={[\n            {\n              key: 'shortcut-record-toggle',\n              label: 'shortcut-record-toggle-label',\n              action: this.handleRecordClick,\n            },\n            {\n              key: 'shortcut-rerecord-toggle',\n              label: 'shortcut-rerecord-toggle-label',\n              action: this.handleRecordClick,\n            },\n          ]}\n          type=\"speak\"\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = (state: StateTree) => {\n  return {\n    api: state.api,\n    locale: state.locale,\n    sentences: Sentences.selectors.localeSentences(state),\n    user: state.user,\n  };\n};\n\nconst mapDispatchToProps = {\n  addNotification: Notifications.actions.addPill,\n  addUploads: Uploads.actions.add,\n  removeSentences: Sentences.actions.remove,\n  tallyRecording: User.actions.tallyRecording,\n  refreshUser: User.actions.refresh,\n  updateUser: User.actions.update,\n};\n\nexport default withRouter(\n  localeConnector(\n    withLocalization(\n      connect<PropsFromState, any>(\n        mapStateToProps,\n        mapDispatchToProps\n      )(SpeakPage)\n    )\n  )\n);\n"],"sourceRoot":""}